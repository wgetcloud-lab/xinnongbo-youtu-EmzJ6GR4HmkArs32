[合集 \- FFmpeg开发实战(54\)](https://github.com)[1\.FFmpeg开发笔记（一）搭建Linux系统的开发环境2023\-04\-16](https://github.com/aqi00/p/17323833.html)[2\.FFmpeg开发笔记（二）搭建Windows系统的开发环境2023\-04\-29](https://github.com/aqi00/p/17363751.html)[3\.FFmpeg开发笔记（三）FFmpeg的可执行程序介绍03\-09](https://github.com/aqi00/p/18062895)[4\.FFmpeg开发笔记（四）FFmpeg的动态链接库介绍03\-10](https://github.com/aqi00/p/18062898)[5\.FFmpeg开发笔记（五）更新MSYS的密钥环03\-16](https://github.com/aqi00/p/18062901)[6\.FFmpeg开发笔记（六）如何访问Github下载FFmpeg源码03\-17](https://github.com/aqi00/p/18062902)[7\.FFmpeg开发笔记（九）Linux交叉编译Android的x265库03\-30](https://github.com/aqi00/p/18078413)[8\.FFmpeg开发笔记（十）Linux环境给FFmpeg集成vorbis和amr03\-31](https://github.com/aqi00/p/18078414)[9\.FFmpeg开发笔记（十一）Windows环境给FFmpeg集成vorbis和amr04\-05](https://github.com/aqi00/p/18078415)[10\.FFmpeg开发笔记（七）欧拉系统编译安装FFmpeg03\-23](https://github.com/aqi00/p/18062905)[11\.FFmpeg开发笔记（八）Linux交叉编译Android的FFmpeg库03\-24](https://github.com/aqi00/p/18062906)[12\.FFmpeg开发笔记（十二）Linux环境给FFmpeg集成libopus和libvpx04\-06](https://github.com/aqi00/p/18105739)[13\.FFmpeg开发笔记（十三）Windows环境给FFmpeg集成libopus和libvpx04\-13](https://github.com/aqi00/p/18105744)[14\.FFmpeg开发笔记（十四）FFmpeg音频重采样的缓存04\-14](https://github.com/aqi00/p/18105749)[15\.FFmpeg开发笔记（十五）详解MediaMTX的推拉流04\-20](https://github.com/aqi00/p/18105753)[16\.FFmpeg开发笔记（十六）Linux交叉编译Android的OpenSSL库04\-21](https://github.com/aqi00/p/18132687)[17\.FFmpeg开发笔记（十七）Windows环境给FFmpeg集成字幕库libass04\-27](https://github.com/aqi00/p/18132702)[18\.FFmpeg开发笔记（十八）FFmpeg兼容各种音频格式的播放05\-04](https://github.com/aqi00/p/18132704)[19\.FFmpeg开发笔记（十九）FFmpeg开启两个线程分别解码音视频05\-05](https://github.com/aqi00/p/18161897)[20\.FFmpeg开发笔记（二十）Linux环境给FFmpeg集成AVS3解码器05\-12](https://github.com/aqi00/p/18161901)[21\.FFmpeg开发笔记（二十一）Windows环境给FFmpeg集成AVS3解码器05\-18](https://github.com/aqi00/p/18161908)[22\.FFmpeg开发笔记（二十二）FFmpeg中SAR与DAR的显示宽高比05\-19](https://github.com/aqi00/p/18161912)[23\.FFmpeg开发笔记（二十三）使用OBS Studio开启RTMP直播推流05\-26](https://github.com/aqi00/p/18199486)[24\.FFmpeg开发笔记（二十四）Linux环境给FFmpeg集成AV1的编解码器05\-27](https://github.com/aqi00/p/18199491)[25\.FFmpeg开发笔记（二十五）Linux环境给FFmpeg集成libwebp06\-01](https://github.com/aqi00/p/18199496)[26\.FFmpeg开发笔记（二十六）Linux环境安装ZLMediaKit实现视频推流06\-02](https://github.com/aqi00/p/18199499)[27\.FFmpeg开发笔记（二十七）解决APP无法访问ZLMediaKit的直播链接问题06\-08](https://github.com/aqi00/p/18199503):[wgetCloud机场](https://tabijibiyori.org)[28\.FFmpeg开发笔记（二十八）Linux环境给FFmpeg集成libxvid06\-09](https://github.com/aqi00/p/18199506)[29\.FFmpeg开发笔记（二十九）Windows环境给FFmpeg集成libxvid06\-15](https://github.com/aqi00/p/18239870)[30\.FFmpeg开发笔记（三十）解析H.264码流中的SPS帧和PPS帧06\-16](https://github.com/aqi00/p/18239876)[31\.FFmpeg开发笔记（三十一）使用RTMP Streamer开启APP直播推流06\-22](https://github.com/aqi00/p/18239879)[32\.FFmpeg开发笔记（三十二）利用RTMP协议构建电脑与手机的直播Demo06\-23](https://github.com/aqi00/p/18239882)[33\.FFmpeg开发笔记（三十三）分析ZLMediaKit对H.264流的插帧操作06\-29](https://github.com/aqi00/p/18240179)[34\.FFmpeg开发笔记（三十四）Linux环境给FFmpeg集成libsrt和librist06\-30](https://github.com/aqi00/p/18240185)[35\.FFmpeg开发笔记（三十五）Windows环境给FFmpeg集成libsrt07\-06](https://github.com/aqi00/p/18240192)[36\.FFmpeg开发笔记（三十六）Linux环境安装SRS实现视频直播推流07\-07](https://github.com/aqi00/p/18240199)[37\.FFmpeg开发笔记全目录（FFmpeg开发实战详解，含直播系统的搭建过程）06\-17](https://github.com/aqi00/p/18250735)[38\.FFmpeg开发笔记（三十七）分析SRS对HLS协议里TS包的插帧操作07\-13](https://github.com/aqi00/p/18288623)[39\.FFmpeg开发笔记（三十八）APP如何访问SRS推流的RTMP直播地址07\-14](https://github.com/aqi00/p/18288628)[40\.FFmpeg开发笔记（三十九）给Visual Studio的C\+\+工程集成FFmpeg07\-20](https://github.com/aqi00/p/18288635)[41\.FFmpeg开发笔记（四十）Nginx集成rtmp模块实现RTMP推拉流07\-21](https://github.com/aqi00/p/18288637)[42\.FFmpeg开发笔记（四十一）结合OBS与MediaMTX实现SRT直播推流07\-27](https://github.com/aqi00/p/18288640)[43\.FFmpeg开发笔记（四十二）使用ZLMediaKit开启SRT视频直播服务07\-28](https://github.com/aqi00/p/18288642)[44\.FFmpeg开发笔记（四十三）使用SRS开启SRT协议的视频直播服务08\-03](https://github.com/aqi00/p/18288645)[45\.FFmpeg开发笔记（四十四）毕业设计可做的几个拉满颜值的音视频APP08\-04](https://github.com/aqi00/p/18328118)[46\.FFmpeg开发笔记（四十五）使用SRT Streamer开启APP直播推流08\-10](https://github.com/aqi00/p/18328119)[47\.FFmpeg开发笔记（四十六）利用SRT协议构建手机APP的直播Demo08\-11](https://github.com/aqi00/p/18328121)[48\.FFmpeg开发笔记（四十七）寒冬下安卓程序员的几个技术转型发展方向08\-17](https://github.com/aqi00/p/18328122)[49\.FFmpeg开发笔记（四十八）从0开始搭建直播系统的开源软件架构08\-18](https://github.com/aqi00/p/18328123)[50\.FFmpeg开发笔记（四十九）助您在毕业设计中脱颖而出的几个流行APP08\-31](https://github.com/aqi00/p/18328125)[51\.FFmpeg开发笔记（五十）聊聊几种流媒体传输技术的前世今生09\-01](https://github.com/aqi00/p/18390366)[52\.FFmpeg开发笔记（五十一）适合学习研究的几个音视频开源框架09\-07](https://github.com/aqi00/p/18390371)[53\.FFmpeg开发笔记（五十二）移动端的国产视频播放器GSYVideoPlayer09\-08](https://github.com/aqi00/p/18390374)54\.FFmpeg开发笔记（五十三）移动端的国产直播录制工具EasyPusher09\-21收起
​EasyPusher是一款国产的RTSP直播录制推流客户端工具，它支持Windows、Linux、Android、iOS等操作系统。EasyPusher采用RTSP推流协议，其中安卓版EasyPusher的Github托管地址为https://github.com/EasyDarwin/EasyPusher\-Android。
 不过EasyPusher有好几年没更新了，尤其安卓版的EasyPusher仍在调用过时的support支持库，而非推出多年的AndroidX库。为了让EasyPusher\-Android源码能够在最新的Android Studio上跑起来，需要对下载后的EasyPusher\-Android源码进行若干改造。以下的改造内容基于Android Studio Dolphin（小海豚版本），详细的改造步骤说明如下。


# 1、升级编译的SDK版本


使用Android Studio Dolphin打开下载后的EasyPusher\-Android项目，把模块build.gradle里面的compileSdkVersion和targetSdkVersion都从26改为28，因为小海豚版本的Android Studio最低支持到API28。


# 2、迁移到Androidx


上个步骤修改了模块build.gradle，单击“Sync Now”同步配置变动。等待同步完成，依次选择顶部菜单：Refactor→Migrate to AndroidX，表示把App工程迁移到AndroidX支持库，接着Android Studio就自动把App工程里的support库配置与相关类统统换成AndroidX的相应对象。


# 3、指定本地NDK的版本号


然后依次选择顶部菜单：Build→Make Project，发现App编译报错“No toolchains found in the NDK toolchains folder for ABI with prefix: arm\-linux\-androideabi”，这是因为Android Studio没找到合适的NDK版本。解决办法是在配置文件中指定本地NDK的版本号（注意事先在SDK Manager中勾选对应版本的ndk，具体参见《FFmpeg开发实战：从零基础到短视频上线》一书第12章的“12\.1\.1  搭建Android的NDK开发环境”），打开模块build.gradle，把下面这行




```
    buildToolsVersion '28.0.3'
```


改为下面这行




```
    //buildToolsVersion '28.0.3'
    ndkVersion '21.4.7075529' // 这里的ndkVersion改为自己电脑上的ndk版本号
```


接着单击“Sync Now”同步配置变动。


# 4、升级App工程的Gradle版本号


然后依次选择顶部菜单：Build→Make Project，发现App编译报错“java.lang.NoClassDefFoundError: javax/xml/bind/JAXBException”，这是因为EasyPusher\-Android默认的Gradle版本太低。解决办法是升级EasyPusher\-Android项目的Gradle版本号，先把gradle/wrapper/gradle\-wrapper.properties里的distributionUrl值改为下面这个：




```
https\://services.gradle.org/distributions/gradle-6.7.1-bin.zip
```


再把项目级别build.gradle里面的节点路径buildscript→dependencies→classpath值改为下面这个：




```
'com.android.tools.build:gradle:4.2.1'
```


接着单击“Sync Now”同步配置变动。


# 5、编译并运行EasyPusher\-Android


然后依次选择顶部菜单：Build→Make Project，等待编译通过后依次选择顶部菜单：Run→Run 'app'，在调试的真机上即可看到EasyPusher\-Android的App界面如下图所示。


![](https://img2024.cnblogs.com/blog/729938/202408/729938-20240831153556860-1453302318.jpg)


点击App界面右下角的设置按钮，打开设置页面如下图所示，注意修改上方编辑框中的服务端推流地址，比如rtsp://124\.70\.\*\*\*.\*\*\*/live/test。


![](https://img2024.cnblogs.com/blog/729938/202408/729938-20240831153615951-1684925337.jpg)


注意，由于EasyPusher仅支持RTSP推流，不支持RTMP等其他推流协议，因此上面只能填写RTSP推流链接。至于服务端的流媒体服务器，可采用ZLMediaKit，有关ZLMediaKit的使用说明详见之前的文章《Linux环境安装ZLMediaKit实现视频推流》。


更多详细的FFmpeg开发知识参见[《FFmpeg开发实战：从零基础到短视频上线》](https://item.jd.com/14020415.html "《FFmpeg开发实战：从零基础到短视频上线》")一书。


 


​
